CKEDITOR.dialog.add("googledocs",function(a){var d=!(!a.config.filebrowserImageBrowseUrl&&!a.config.filebrowserBrowseUrl),b=[{type:"text",id:"txtUrl",label:a.lang.googledocs.url,required:!0,onChange:function(){return!0},validate:CKEDITOR.dialog.validate.notEmpty(a.lang.googledocs.alertUrl)}];d&&b.push({type:"button",id:"browse",style:"display:inline-block;margin-top:16px;",align:"center",label:a.lang.common.browseServer,hidden:!0,filebrowser:"settingsTab:txtUrl"});return{title:a.lang.googledocs.title,
width:400,height:350,onLoad:function(){getDocuments()},contents:[{id:"settingsTab",label:a.lang.googledocs.settingsTab,elements:[{type:"select",id:"documents",className:"googledocs",label:a.lang.googledocs.selectDocument,items:[],"default":"",size:4,onChange:function(a){CKEDITOR.dialog.getCurrent().getContentElement("settingsTab","txtUrl").setValue(this.getValue())}},{type:"vbox",padding:0,children:[{type:"hbox",widths:["100%"],children:b}]},{type:"hbox",widths:["60px","330px"],className:"googledocs",
children:[{type:"text",width:"45px",id:"txtWidth",label:a.lang.common.width,"default":710,required:!0,validate:CKEDITOR.dialog.validate.integer(a.lang.googledocs.alertWidth)},{type:"text",id:"txtHeight",width:"45px",label:a.lang.common.height,"default":920,required:!0,validate:CKEDITOR.dialog.validate.integer(a.lang.googledocs.alertHeight)}]}]},{id:"uploadTab",label:a.lang.googledocs.uploadTab,filebrowser:"uploadButton",elements:[{type:"file",id:"upload"},{type:"fileButton",id:"uploadButton",label:a.lang.googledocs.btnUpload,
filebrowser:{action:"QuickUpload",target:"settingsTab:txtUrl",onSelect:function(a,c){getDocuments(a)}},"for":["uploadTab","upload"]}]}],onOk:function(){var b=a.document.createElement("iframe"),c=this.getValueOf("settingsTab","txtUrl");/(ftp|http|https):\/\//.test(c)||(c=window.location.protocol+"//"+window.location.host+c);c=encodeURIComponent(c);b.setAttribute("src","http://docs.google.com/viewer?url="+c+"&embedded=true");b.setAttribute("width",this.getValueOf("settingsTab","txtWidth"));b.setAttribute("height",
this.getValueOf("settingsTab","txtHeight"));b.setAttribute("style","border: none;");a.insertElement(b)}}});var getDocuments=function(a){CKEDITOR.env.ie7Compat&&fixIE7display();$.get(CKEDITOR.currentInstance.config.filebrowserGoogledocsBrowseUrl,function(d){var b=CKEDITOR.dialog.getCurrent().getContentElement("settingsTab","documents");b.clear();$.each(d,function(a,c){b.add(c.name,c.url)});b.setValue(a);console.log(a);a&&b.focus()},"json")};